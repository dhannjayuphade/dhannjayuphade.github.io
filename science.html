<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Science Quiz | Dhannjay Official</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
    font-family: Arial;
    background: linear-gradient(135deg,#1e3c72,#2a5298);
    text-align:center;
    color:white;
}

.container{
    background:white;
    color:black;
    width:90%;
    max-width:700px;
    margin:auto;
    padding:20px;
    border-radius:10px;
    margin-top:30px;
}

button{
    padding:10px 20px;
    background:#007BFF;
    color:white;
    border:none;
    border-radius:6px;
    cursor:pointer;
    margin-top:10px;
}

button:hover{background:#0056b3;}

.hidden{display:none;}

#timer{
    font-weight:bold;
    color:red;
    font-size:18px;
}

/* Certificate Style */
.certificate{
    background:white;
    color:black;
    padding:40px;
    border:10px solid gold;
    margin-top:20px;
}
</style>
</head>

<body oncontextmenu="return false">

<h1>üåü Science Quiz üåü</h1>

<div class="container">

<div id="startSection">
<input type="text" id="username" placeholder="Enter Your Name"><br><br>
<button onclick="startQuiz()">Start Quiz</button>
</div>

<div id="quizSection" class="hidden">
<p id="timer">Time Left: 60 sec</p>
<div id="questions"></div>
<button onclick="submitQuiz()">Submit</button>
</div>

<div id="resultSection" class="hidden"></div>

</div>

<script>

const questions=[
{q:"Water formula?",a:["H2O","CO2","NaCl","O2"],c:"H2O"},
{q:"Earth is ____ planet?",a:["2nd","3rd","4th","5th"],c:"3rd"},
{q:"Sun is a?",a:["Star","Planet","Moon","Asteroid"],c:"Star"},
{q:"Human heart chambers?",a:["2","3","4","5"],c:"4"},
{q:"Boiling point of water?",a:["100¬∞C","50¬∞C","0¬∞C","200¬∞C"],c:"100¬∞C"}
];

let timeLeft=60;
let timer;

function startQuiz(){
let name=document.getElementById("username").value.trim();
if(name===""){alert("Enter your name");return;}

document.getElementById("startSection").classList.add("hidden");
document.getElementById("quizSection").classList.remove("hidden");

loadQuestions();
startTimer();
}

function loadQuestions(){
let qDiv=document.getElementById("questions");
qDiv.innerHTML="";
questions.forEach((q,i)=>{
qDiv.innerHTML+=`<p>${i+1}. ${q.q}</p>`;
q.a.forEach(opt=>{
qDiv.innerHTML+=`
<label>
<input type="radio" name="q${i}" value="${opt}" required> ${opt}
</label><br>`;
});
qDiv.innerHTML+="<br>";
});
}

function startTimer(){
timer=setInterval(()=>{
timeLeft--;
document.getElementById("timer").innerText="Time Left: "+timeLeft+" sec";
if(timeLeft<=0){
clearInterval(timer);
submitQuiz();
}
},1000);
}

function submitQuiz(){
clearInterval(timer);

let score=0;
questions.forEach((q,i)=>{
let selected=document.querySelector(`input[name="q${i}"]:checked`);
if(selected && selected.value===q.c){
score++;
}
});

let percent=Math.round((score/questions.length)*100);
let name=document.getElementById("username").value;

showCertificate(name,percent);
}

function showCertificate(name,percent){
let html=`
<div class="certificate" id="certificateBox">
<h2>üèÜ Certificate of Completion üèÜ</h2>
<p>This is proudly presented to</p>
<h1>${name}</h1>
<p>for completing the Science Quiz</p>
<h3>Score: ${percent}%</h3>
<p>Date: ${new Date().toLocaleDateString()}</p>
<br>
<button onclick="downloadPDF()">Download PDF</button>
</div>
`;

document.getElementById("quizSection").classList.add("hidden");
document.getElementById("resultSection").innerHTML=html;
document.getElementById("resultSection").classList.remove("hidden");
}

function downloadPDF(){
html2canvas(document.getElementById("certificateBox")).then(canvas=>{
const imgData=canvas.toDataURL("image/png");
const pdf=new jspdf.jsPDF();
pdf.addImage(imgData,'PNG',10,10,190,0);
pdf.save("Science_Certificate.pdf");
});
}

// Anti Cheat
document.addEventListener("visibilitychange",function(){
if(document.hidden){
alert("Tab change detected! Quiz submitted.");
submitQuiz();
}
});

</script>

</body>
</html>
