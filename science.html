<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Science Special Quiz</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  font-family: Arial;
  background: linear-gradient(135deg,#1e3c72,#2a5298);
  padding:15px;
  color:white;
}
h1{text-align:center;}
.question{
  background:white;
  color:black;
  padding:15px;
  margin:10px 0;
  border-radius:10px;
}
.correct{background:#c8e6c9;}
.incorrect{background:#ffcdd2;}
button{
  padding:10px 18px;
  background:white;
  color:#1e3c72;
  font-weight:bold;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
#certificate{
  display:none;
  width:900px;
  margin:30px auto;
  padding:30px;
  background:white;
  color:black;
  border:12px solid #1e3c72;
  text-align:center;
  position:relative;
}
#certificate img.banner{
  width:100%;
  height:180px;
  object-fit:cover;
}
.signature{
  position:absolute;
  bottom:20px;
  right:40px;
  font-weight:bold;
  color:#1e3c72;
}
#leaderboard{
  background:white;
  color:black;
  padding:15px;
  margin-top:20px;
  border-radius:10px;
}
</style>
</head>
<body>

<h1>üî¨ Science Special Quiz üî¨</h1>

<label>Your Name:</label><br>
<input type="text" id="username"><br><br>

<form id="quizForm"></form>
<br>
<button onclick="submitQuiz()">Submit Quiz</button>
<h2 id="result"></h2>

<div id="certificate">
<img src="banner.jpg" class="banner">
<h2 style="color:#1e3c72;">Science Achievement Certificate</h2>
<p>This certificate is proudly presented to</p>
<h1 id="certName"></h1>
<p>For scoring <span id="certScore"></span>% in Science Special Quiz</p>
<p>Date: <span id="certDate"></span></p>
<hr>
<p><strong>Website:</strong> <a href="https://dhannjayuphade.github.io/" target="_blank">dhannjayuphade.github.io</a></p>
<p><strong>Email:</strong> dhannjayuphade5@gmail.com</p>
<div class="signature">Dhannjay Uphade</div>
</div>

<div id="leaderboard">
<h3>üèÜ Top 5 Scores</h3>
<ul id="topScores"></ul>
</div>

<button id="downloadBtn" style="display:none;" onclick="downloadPDF()">Download Certificate</button>

<script>
// Questions
const questions = [
{q:"1. What planet is known as Red Planet?",options:["Earth","Mars","Jupiter","Venus"],answer:1},
{q:"2. H2O is chemical formula of?",options:["Oxygen","Hydrogen","Water","Salt"],answer:2},
{q:"3. Sun is a?",options:["Planet","Star","Galaxy","Comet"],answer:1},
{q:"4. Human heart has how many chambers?",options:["2","3","4","5"],answer:2},
{q:"5. Gas essential for breathing?",options:["Oxygen","Nitrogen","CO2","Helium"],answer:0},
{q:"6. Speed of light approx?",options:["3x10^8 m/s","1x10^5","5x10^6","9x10^2"],answer:0},
{q:"7. Largest planet?",options:["Earth","Mars","Jupiter","Saturn"],answer:2},
{q:"8. Plants prepare food by?",options:["Respiration","Photosynthesis","Digestion","Fermentation"],answer:1},
{q:"9. Blood color is red due to?",options:["Iron","Oxygen","Hemoglobin","Water"],answer:2},
{q:"10. SI unit of Force?",options:["Joule","Watt","Newton","Pascal"],answer:2}
];

// Render Questions
const form = document.getElementById("quizForm");
questions.forEach((item,index)=>{
  form.innerHTML += `<div class="question">
    <p>${index+1}. ${item.q}</p>
    ${item.options.map((opt,i)=>`<label>
      <input type="radio" name="q${index}" value="${i}"> ${opt}</label><br>`).join("")}
  </div>`;
});

// Timer 15 min
let totalTime=900;
const timerDiv=document.createElement("div");
timerDiv.style.color="white"; timerDiv.style.textAlign="center";
timerDiv.style.fontSize="20px"; timerDiv.innerText="Time Left: 15:00";
form.parentNode.insertBefore(timerDiv, form);
let countdown=setInterval(()=>{
  let m=Math.floor(totalTime/60);
  let s=totalTime%60;
  timerDiv.innerText=`Time Left: ${m}:${s<10?"0":""}${s}`;
  totalTime--;
  if(totalTime<0){clearInterval(countdown);submitQuiz();}
},1000);

// Submit Quiz
function submitQuiz(){
  clearInterval(countdown);
  let score=0;
  questions.forEach((item,index)=>{
    const selected=document.querySelector(`input[name="q${index}"]:checked`);
    if(selected){
      if(parseInt(selected.value)===item.answer){score++;}
      // highlight
      const options=document.querySelectorAll(`input[name="q${index}"]`);
      options.forEach((opt,i)=>{
        opt.parentElement.classList.remove("correct","incorrect");
        if(i===item.answer) opt.parentElement.classList.add("correct");
        if(selected.value!=item.answer && i==selected.value) opt.parentElement.classList.add("incorrect");
      });
    }
  });

  const percent=Math.round((score/questions.length)*100);
  document.getElementById("result").innerText="Your Score: "+percent+"%";

  const name=document.getElementById("username").value;
  if(name===""){alert("Enter Name");return;}

  document.getElementById("certificate").style.display="block";
  document.getElementById("downloadBtn").style.display="inline-block";
  document.getElementById("certName").innerText=name;
  document.getElementById("certScore").innerText=percent;
  document.getElementById("certDate").innerText=new Date().toLocaleDateString();

  saveScore(name,percent);
  displayLeaderboard();
}

// Leaderboard
function saveScore(name,score){
  let scores=JSON.parse(localStorage.getItem("scienceScores"))||[];
  scores.push({name,score});
  scores.sort((a,b)=>b.score-a.score);
  scores=scores.slice(0,5);
  localStorage.setItem("scienceScores",JSON.stringify(scores));
}

function displayLeaderboard(){
  let scores=JSON.parse(localStorage.getItem("scienceScores"))||[];
  const list=document.getElementById("topScores");
  list.innerHTML="";
  scores.forEach(item=>{list.innerHTML+=`<li>${item.name} - ${item.score}%</li>`;});
}

displayLeaderboard();

// PDF Download
function downloadPDF(){
  html2canvas(document.getElementById("certificate")).then(canvas=>{
    const imgData=canvas.toDataURL("image/png");
    const { jsPDF }=window.jspdf;
    const pdf=new jsPDF('landscape');
    pdf.addImage(imgData,'PNG',10,10,270,180);
    pdf.save("Science_Certificate.pdf");
  });
}
</script>
<h1>Thanks for participating!</h1>

</body>
  </html>
